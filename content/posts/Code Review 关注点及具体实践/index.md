+++
title = 'Code Review 关注点及具体实践'
date = 2023-12-06T21:51:10+08:00
draft = true
+++

## 什么是 Code Review？
> 代码审查是指对计算机源代码系统化地审查，常用软件同行评审的方式进行，其目的是在找出及修正在软件开发初期未发现的错误，提升软件质量及开发者的技术。 -- 维基百科

代码审查（Code Review）指一种通过复查代码来保证代码质量的过程。其主要发生在代码提交测试前，通过一个或多个人通过阅读部分代码来检查代码的质量。其中至少一人不得为该代码的编写者。

## 为什么要 Code Review？

尽管代码审查主要用于发现代码中的错误，但通常会附带以下其他目标：
* 更高质量的代码：提高代码的可读性及可维护性
* 查找缺陷逻辑：主要是代码逻辑外的问题，如性能问题，安全漏洞等
* 学习提高：帮助审查人员和作者相互交流解决方案，公共类库信息等
* 寻找更好的解决方案：集合多人的想法，产生更好的解决方案
* 增强团队责任感：提高团队成员间对代码的责任感，以及更好的合作意识
* 开发规范：帮助成员遵循开发规范

代码审查流程为代码的持续改进奠定了基础，并且也防止了不稳定代码的交付。

当然代码审查也存在以下问题：
* 更长的交付时间
* 消耗开发人员的注意力：导致开发人员的注意力在开发任务及审查任务间频繁切换
* 大量代码难以审查：对于大量代码的审查，审查人员会疲于代码的阅读，导致审查质量下降

## 怎么做 Code Review？

## Code Review 中的错误实践
> Everyone cares about best practices, but worst practices can sometimes be more illuminating.

代码审查很重要，但是有时也会陷入错误的实践方式，比如以下几种：
### 吹毛求疵（nit picking）
过于关注代码细节和微小问题，从而忽视了整体质量和目标的审查行为
举例来说，代码作者投入了长时间的精力，考虑了多种设计方案，来创建他们认为最有效的解决方案。然后代码通过审查后得到的是针对提交代码样式不妥当的反馈。
尽管新代码与现有代码风格保持一致很重要，但这类问题基本不需要人工审阅。人工审阅的成本很高，使用人工审阅的目的是为了解决计算机无法完成的事情。检查新代码是否符合样式标准对于计算机是一件可以轻松完成的事情，让人工审阅关注这类问题只会偏离代码审查的真正目的

### 众口难调（inconsistent feedbacks）
团队成员花费不合理的时间和精力讨论琐碎的细节问题，而忽视了更重要的设计和功能方面的讨论

### 石沉大海（ghost reviewers）
在代码审查过程中，提出的问题、建议或改进意见被忽视或无动于衷，没有得到适当的关注和跟进

### 一举推翻（design changes when the code works）
审查人员试图完全改变或彻底重写作者的代码，而不是提供有针对性的意见和建议

### 你来我往（ping pong review）
审查人员和作者之间陷入无休止的讨论和反复修改的循环，无法达成共识或解决问题
  


## 参考文献
* Code Review Best Practices
  https://roadmap.sh/best-practices/code-review
* 维基百科，Code_review
  https://en.wikipedia.org/wiki/Code_review
* Five Code Review Antipatterns
  https://blogs.oracle.com/javamagazine/post/five-code-review-antipatterns
